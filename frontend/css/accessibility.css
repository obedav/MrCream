/* ========================================
   MRCREAM ACCESSIBILITY ENHANCEMENTS
   WCAG 2.1 Level AAA Compliance
   ======================================== */

/* ========================================
   1. SKIP NAVIGATION
   ======================================== */
.skip-to-content {
    position: absolute;
    top: -100px;
    left: 0;
    background: var(--primary-blue, hsl(230, 70%, 45%));
    color: white;
    padding: 1rem 1.5rem;
    text-decoration: none;
    font-weight: 700;
    border-radius: 0 0 0.5rem 0;
    z-index: 10000;
    transition: top 0.3s ease;
}

.skip-to-content:focus {
    top: 0;
    outline: 3px solid white;
    outline-offset: 2px;
}

/* ========================================
   2. FOCUS INDICATORS - High Visibility
   ======================================== */

/* Default focus styles */
*:focus-visible {
    outline: 3px solid hsl(230, 70%, 45%);
    outline-offset: 3px;
    border-radius: 0.25rem;
}

/* Interactive Elements */
a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
[tabindex]:focus-visible {
    outline: 3px solid hsl(230, 70%, 45%);
    outline-offset: 3px;
}

/* Navigation Links */
.nav-link:focus-visible {
    outline: 3px solid hsl(230, 70%, 45%);
    outline-offset: 4px;
    background-color: hsla(230, 70%, 45%, 0.1);
}

/* Buttons - Enhanced Focus */
.btn:focus-visible,
.btn-hero-primary:focus-visible,
.btn-hero-secondary:focus-visible {
    outline: 4px solid hsl(230, 70%, 45%);
    outline-offset: 4px;
    box-shadow: 0 0 0 6px hsla(230, 70%, 45%, 0.2);
}

/* Form Elements */
.form-control:focus,
.form-select:focus,
.form-check-input:focus {
    border-color: hsl(230, 70%, 45%);
    box-shadow: 0 0 0 4px hsla(230, 70%, 45%, 0.2);
    outline: 3px solid hsl(230, 70%, 45%);
    outline-offset: 2px;
}

/* Custom Checkboxes and Radios */
.form-check-input:focus-visible {
    outline: 3px solid hsl(230, 70%, 45%);
    outline-offset: 3px;
    box-shadow: 0 0 0 6px hsla(230, 70%, 45%, 0.2);
}

/* Swiper Navigation */
.swiper-button-next:focus-visible,
.swiper-button-prev:focus-visible,
.swiper-pagination-bullet:focus-visible {
    outline: 4px solid hsl(230, 70%, 45%);
    outline-offset: 4px;
    box-shadow: 0 0 0 8px hsla(230, 70%, 45%, 0.2);
}

/* ========================================
   3. SCREEN READER SUPPORT
   ======================================== */

/* Screen Reader Only Text */
.sr-only,
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

/* Screen Reader Focusable */
.sr-only-focusable:not(:focus):not(:focus-within),
.visually-hidden-focusable:not(:focus):not(:focus-within) {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border-width: 0 !important;
}

/* ========================================
   4. KEYBOARD NAVIGATION ENHANCEMENTS
   ======================================== */

/* Keyboard Navigation Indicator */
body.keyboard-navigation *:focus {
    outline: 3px solid hsl(230, 70%, 45%) !important;
    outline-offset: 3px !important;
}

/* No outline on mouse interaction */
body:not(.keyboard-navigation) *:focus {
    outline: none;
}

/* Re-enable for specific interactive elements */
body:not(.keyboard-navigation) a:focus-visible,
body:not(.keyboard-navigation) button:focus-visible,
body:not(.keyboard-navigation) input:focus-visible,
body:not(.keyboard-navigation) textarea:focus-visible,
body:not(.keyboard-navigation) select:focus-visible {
    outline: 3px solid hsl(230, 70%, 45%);
    outline-offset: 3px;
}

/* ========================================
   5. COLOR CONTRAST ENHANCEMENTS
   ======================================== */

/* High Contrast Text */
.high-contrast-text {
    color: hsl(0, 0%, 13%);
    font-weight: 600;
}

/* Link Contrast - WCAG AAA */
a {
    color: hsl(230, 70%, 40%);
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 3px;
}

a:hover,
a:focus {
    color: hsl(230, 70%, 30%);
    text-decoration-thickness: 3px;
}

a:visited {
    color: hsl(280, 60%, 40%);
}

/* Button Contrast */
.btn-primary,
.btn-hero-primary {
    background: hsl(230, 70%, 45%);
    color: white;
    font-weight: 700;
}

.btn-secondary,
.btn-hero-secondary {
    background: white;
    color: hsl(0, 0%, 13%);
    border: 2px solid hsl(0, 0%, 13%);
    font-weight: 700;
}

/* Text on colored backgrounds */
.text-on-primary {
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.text-on-light {
    color: hsl(0, 0%, 13%);
}

/* ========================================
   6. MOTION & ANIMATION PREFERENCES
   ======================================== */

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    /* Disable parallax effects */
    .parallax,
    .floating-element {
        transform: none !important;
        animation: none !important;
    }

    /* Simplify hover effects */
    *:hover {
        transform: none !important;
    }
}

/* Smooth scroll for normal motion */
@media (prefers-reduced-motion: no-preference) {
    html {
        scroll-behavior: smooth;
    }
}

/* ========================================
   7. HIGH CONTRAST MODE
   ======================================== */

@media (prefers-contrast: high) {
    /* Increase border visibility */
    .hero-badge,
    .stat-item,
    .floating-element,
    .btn,
    .form-control,
    .card {
        border: 2px solid currentColor !important;
    }

    /* Remove subtle shadows */
    * {
        box-shadow: none !important;
        text-shadow: none !important;
    }

    /* Increase text weight */
    body {
        font-weight: 600;
    }

    /* High contrast focus */
    *:focus-visible {
        outline: 4px solid currentColor !important;
        outline-offset: 4px !important;
    }

    /* Simplify backgrounds */
    .hero-swiper,
    .swiper-slide,
    .slide-yoghurt,
    .slide-waterpark,
    .slide-liqueur {
        background: white !important;
    }

    /* Force high contrast text */
    .hero-title,
    .hero-description,
    .stat-label,
    body {
        color: black !important;
    }

    /* Gradient text to solid */
    .highlight-text,
    .stat-number {
        -webkit-text-fill-color: currentColor !important;
        background: none !important;
        color: black !important;
    }
}

/* ========================================
   8. TOUCH TARGET SIZE (WCAG 2.5.5)
   ======================================== */

/* Minimum 44x44px touch targets */
button,
a,
input[type="button"],
input[type="submit"],
input[type="reset"],
.btn,
.nav-link,
.swiper-button-next,
.swiper-button-prev,
.indicator-dot {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Form controls */
input[type="checkbox"],
input[type="radio"] {
    min-width: 24px;
    min-height: 24px;
}

/* Ensure adequate spacing between touch targets */
.btn + .btn,
.nav-link + .nav-link,
button + button {
    margin-left: 8px;
}

/* ========================================
   9. FONT SIZE AND LINE HEIGHT
   ======================================== */

/* Minimum font size for readability */
body {
    font-size: 16px;
    line-height: 1.5;
}

/* Ensure text can be resized to 200% */
@media (min-width: 1200px) {
    html {
        font-size: 100%;
    }
}

/* Headings line height */
h1, h2, h3, h4, h5, h6,
.hero-title {
    line-height: 1.2;
}

/* Body text line height */
p,
.hero-description,
li {
    line-height: 1.7;
}

/* Small text minimum size */
small,
.small {
    font-size: 0.875rem;
}

/* ========================================
   10. ERROR AND SUCCESS STATES
   ======================================== */

/* Error Messages - High Visibility */
.error-message,
.invalid-feedback,
.alert-danger {
    color: hsl(0, 65%, 35%);
    background-color: hsl(0, 65%, 95%);
    border: 2px solid hsl(0, 65%, 50%);
    padding: 1rem;
    border-radius: 0.5rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.error-message::before,
.invalid-feedback::before {
    content: "⚠";
    font-size: 1.5rem;
    flex-shrink: 0;
}

/* Success Messages */
.success-message,
.valid-feedback,
.alert-success {
    color: hsl(142, 65%, 25%);
    background-color: hsl(142, 65%, 95%);
    border: 2px solid hsl(142, 65%, 40%);
    padding: 1rem;
    border-radius: 0.5rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.success-message::before,
.valid-feedback::before {
    content: "✓";
    font-size: 1.5rem;
    flex-shrink: 0;
}

/* Info Messages */
.info-message,
.alert-info {
    color: hsl(207, 65%, 25%);
    background-color: hsl(207, 65%, 95%);
    border: 2px solid hsl(207, 65%, 50%);
    padding: 1rem;
    border-radius: 0.5rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.info-message::before {
    content: "ℹ";
    font-size: 1.5rem;
    flex-shrink: 0;
}

/* Form Validation States */
.form-control.is-invalid,
.form-select.is-invalid {
    border-color: hsl(0, 65%, 50%);
    border-width: 2px;
}

.form-control.is-valid,
.form-select.is-valid {
    border-color: hsl(142, 65%, 40%);
    border-width: 2px;
}

/* ========================================
   11. LIVE REGIONS FOR SCREEN READERS
   ======================================== */

/* Polite announcements */
[aria-live="polite"] {
    position: relative;
}

/* Assertive announcements */
[aria-live="assertive"] {
    position: relative;
}

/* Loading states */
[aria-busy="true"] {
    cursor: wait;
    opacity: 0.7;
    pointer-events: none;
}

/* ========================================
   12. TABLE ACCESSIBILITY
   ======================================== */

/* Better table visibility */
table {
    border-collapse: collapse;
    width: 100%;
}

th {
    background-color: hsl(230, 70%, 45%);
    color: white;
    font-weight: 700;
    text-align: left;
    padding: 1rem;
    border: 1px solid hsl(230, 70%, 35%);
}

td {
    padding: 1rem;
    border: 1px solid hsl(0, 0%, 80%);
}

tr:nth-child(even) {
    background-color: hsl(0, 0%, 97%);
}

/* Responsive tables */
@media (max-width: 767px) {
    table {
        display: block;
        overflow-x: auto;
    }
}

/* ========================================
   13. IMAGE ACCESSIBILITY
   ======================================== */

/* Ensure images have proper alt text indication */
img:not([alt]) {
    border: 3px dashed red;
    outline: 3px solid red;
}

/* Decorative images */
img[alt=""],
img[role="presentation"] {
    border: none;
    outline: none;
}

/* Figure captions */
figcaption {
    font-style: italic;
    color: hsl(0, 0%, 35%);
    margin-top: 0.5rem;
    font-size: 0.875rem;
}

/* ========================================
   14. PRINT ACCESSIBILITY
   ======================================== */

@media print {
    /* Show URLs after links */
    a[href]::after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: hsl(0, 0%, 40%);
    }

    /* Remove decorative elements */
    nav,
    .modal,
    .dropdown,
    .tooltip,
    .swiper-button-next,
    .swiper-button-prev,
    .swiper-pagination {
        display: none !important;
    }

    /* High contrast for print */
    body {
        background: white;
        color: black;
    }

    /* Page breaks */
    h1, h2, h3, h4, h5, h6 {
        page-break-after: avoid;
    }

    .stat-item,
    .floating-element,
    .hero-content {
        page-break-inside: avoid;
    }
}

/* ========================================
   15. LOADING STATES
   ======================================== */

/* Loading spinner accessible */
.loading-spinner {
    border: 3px solid hsl(0, 0%, 90%);
    border-top: 3px solid hsl(230, 70%, 45%);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Loading text */
.loading-text {
    margin-top: 1rem;
    font-weight: 600;
    color: hsl(0, 0%, 40%);
}

/* ========================================
   16. TOOLTIP ACCESSIBILITY
   ======================================== */

/* Accessible tooltips */
[data-tooltip] {
    position: relative;
    cursor: help;
}

[data-tooltip]:hover::after,
[data-tooltip]:focus::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: hsl(0, 0%, 13%);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 0.25rem;
    white-space: nowrap;
    font-size: 0.875rem;
    z-index: 1000;
    margin-bottom: 0.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* ========================================
   17. MODAL ACCESSIBILITY
   ======================================== */

/* Trap focus in modal */
.modal-open {
    overflow: hidden;
}

.modal-backdrop {
    background-color: rgba(0, 0, 0, 0.75);
}

.modal:focus-visible {
    outline: 4px solid hsl(230, 70%, 45%);
    outline-offset: -4px;
}

/* ========================================
   18. CUSTOM FOCUS VISIBLE UTILITY
   ======================================== */

.focus-ring:focus-visible {
    outline: 3px solid hsl(230, 70%, 45%);
    outline-offset: 3px;
    box-shadow: 0 0 0 6px hsla(230, 70%, 45%, 0.2);
}

.focus-ring-danger:focus-visible {
    outline: 3px solid hsl(0, 65%, 50%);
    outline-offset: 3px;
    box-shadow: 0 0 0 6px hsla(0, 65%, 50%, 0.2);
}

.focus-ring-success:focus-visible {
    outline: 3px solid hsl(142, 65%, 40%);
    outline-offset: 3px;
    box-shadow: 0 0 0 6px hsla(142, 65%, 40%, 0.2);
}
